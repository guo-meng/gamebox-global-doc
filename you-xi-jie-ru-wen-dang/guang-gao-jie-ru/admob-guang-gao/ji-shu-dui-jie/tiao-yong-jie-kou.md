# 调用接口

### 1、初始化

调用该函数初始化广告SDK，该函数需要在[GameSDK.init\(\)](../../../ji-shu-dui-jie/ke-hu-duan-dui-jie/tiao-yong-jie-kou.md#chu-shi-hua)之后调用。

函数：

```javascript
AdSDK.init();
```

#### 注意：为避免广告填充率不足时，游戏出现因无法请求到广告而卡界面的问题，请开发者务必监听请求广告失败的回调，并进行处理。

### 2、创建横幅广告

游戏调用该函数创建横幅广告，仅支持单个banner横幅创建

函数：

```text
var banner=AdSDK.createBannerAd(adId,bannerAdId,position);
```

参数说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| adId | 广告序号ID | String | 非空 | 标识广告\(游戏自定义\) |
| bannerId | 广告位ID | String | 非空 | 广告位ID，需申请 |
| position | 广告位置 | Int | 非空 | 1、顶部；2、底部； |

### 3、监听横幅广告加载成功事件

游戏调用该函数注册回调函数，当加载广告成功时平台会通知游戏，游戏收到该回调后，在调用展示操作。

函数：

```text
banner.onLoad (func());
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 横幅广告加载成功回调函数 | function | 非空 | 游戏定义回调函数 |

### 4、监听横幅广告加载失败事件

游戏调用该函数注册回调函数，当加载广告失败时函数会执行

函数：

```text
banner.onError(func(param));
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 横幅广告加载失败回调函数 | function | 非空 | 游戏定义回调函数 |

参数说明：

| 参数 | 含义 | 类型 | 是否为空 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| param | 广告加载失败 | Json对象 | 非空 | Json对象，见下文 |

```text
Param Json对象:
{
    adId,  // string 加载失败的广告Id
    errorCode//string 错误码
}
errorCode请查看本文最下方错误列表
```

### 5、展示横幅广告

横幅广告组件默认是隐藏的，调用广告实例的show函数展示横幅广告，返回值为Promise,banner广告显示操作的结果

_**建议在监听到横幅广告加载成功的回调函数中调用该函数。**_

函数：

```text
banner.show().then(function(){
    console.log('banner 广告显示成功')
},function(err){
    console.log('banner 广告显示失败')
})

```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| function\(\) | 展示广告成功回调 | function | 否 | 游戏自定义该方法 |
| function\(err\) | 展示广告失败回调 | function | 否 | 游戏自定义该方法 |

### 6、隐藏横幅广告

调用广告实例的hide函数隐藏横幅广告

函数：

```text
banner.hide();
```

### 7、销毁横幅广告

调用广告实例的destroy函数销毁横幅广告

函数：

```text
banner.destroy();
```

### 8、创建插屏广告

调用该函数创建插屏广告，**建议开发者提前创建的广告，这样展示广告的时候无需加载，体验上更好。**

函数：

```text
var interstitialAd = AdSDK.createInterstitialAd(adId，interstitialAdId, style)
```

参数说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| adId | 广告序号ID | String | 非空 | 标识广告\(游戏自定义\) |
| interstitialAdId | 广告位ID | String | 非空 | 插屏广告位ID，需申请 |
| style | 展示样式 | Int | 非空 | 1、全屏；2、半屏 |

### 9、监听插屏广告加载成功事件

游戏调用该函数注册回调函数，当加载插屏广告成功时平台会通知游戏，游戏收到该回调后，在调用展示操作。

函数：

```text
interstitialAd.onLoad(func());
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 插屏广告加载成功回调函数 | function | 非空 | 游戏定义回调函数 |

### 10、监听插屏广告加载失败事件

游戏调用该函数注册回调函数，当加载广告失败时函数会执行。如广告加载失败，确保游戏正常继续运行。

函数：

```text
interstitialAd.onError(func(param));
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 插屏广告加载失败回调函数 | function | 非空 | 游戏定义回调函数 |

参数说明

| 参数 | 含义 | 类型 | 是否为空 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| param | 广告加载失败 | Json对象 | 非空 | Json对象，见下文 |

```text
Param Json对象:
{
    adId,  // string 加载失败的广告Id
    errorCode//string 错误码
}
errorCode请查看本文最下方错误列表
```

### 11、展示插屏广告

调用广告实例的show函数展示插屏广告，返回值Promise，返回广告显示操作的结果

_**建议在监听到插屏广告加载成功的回调函数中调用该函数。**_

函数：

```text
interstitialAd.show().then(function(){
      console.log('interstitialAd 广告显示成功')
 },function(err){
      console.log('interstitialAd 广告显示失败')
});
```

奖励操作，可以在广告展示成功回调中执行。

参数说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| function\(\) | 展示广告成功回调 | function | 否 | 游戏自定义该方法 |
| function\(err\) | 展示广告失败回调 | function | 否 | 游戏自定义该方法 |

### 12、隐藏插屏广告

调用广告实例的hide函数隐藏插屏广告

函数：

```text
interstitialAd.hide();
```

### 13、销毁插屏广告

调用广告实例的destroy函数销毁插屏广告

函数：

```text
interstitialAd.destroy();
```

### 14、创建视频广告

调用该函数创建视频广告，仅支持单个视频广告创建。**建议开发者提前创建的广告，这样展示广告的时候无需加载，体验上更好。**

函数：

```text
var videoAd=AdSDK.createRewardedVideoAd(adId，videoAdId, screenOrientation);
```

参数说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| adId | 广告序号ID | String | 非空 | 标识广告\(游戏自定义\) |
| videoAdId | 广告位ID | String | 非空 | 视频广告位ID，需申请 |
| screenOrientation | 展示样式 | Int | 非空 | 1、横屏；2、竖屏 |

### 15、监听视频广告加载成功事件

游戏调用该函数注册回调函数，当加载视频广告成功时平台会通知游戏，游戏收到该回调后，在调用展示操作。

函数：

```text
videoAd.onLoad(func());
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 视频广告加载成功回调函数 | function | 非空 | 游戏定义回调函数 |

### 16、监听视频广告加载失败事件

调用该函数注册回调函数，当加载广告失败函数会执行，如广告加载失败，确保游戏正常继续运行。

函数：

```text
videoAd.onError(func(param));
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 视频广告加载失败回调函数 | function | 非空 | 游戏定义回调函数 |

参数说明：

| 参数 | 含义 | 类型 | 是否为空 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| param | 广告加载失败 | Json对象 | 非空 | Json对象，见下文 |

```text
Param Json对象:
{
    adId,  // string 加载失败的广告Id
    errorCode//string 错误码
}
errorCode请查看本文最下方错误列表
```

### 17、展示视频广告（获得激励奖励）

调用该函数展示视频广告，返回值Promise，视频广告显示操作的结果。

_**建议在监听到视频广告加载成功的回调函数中调用该函数。**_

_**展示成功后建议销毁广告对象，从新创建新的广告对象。**_

函数：

```text
videoAd.show().then(function(){
  console.log('videoAd 广告显示成功，发放激励奖励')
},function(err){
  console.log('videoAd 广告显示失败')
});
```

方法说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| function\(\) | 展示广告成功回调 | function | 否 | 游戏自定义该方法 |
| function\(err\) | 展示广告失败回调 | function | 否 | 游戏自定义该方法 |

奖励操作，可以在广告展示成功回调中执行。

### 18、隐藏视频广告

调用该函数隐藏视频广告

函数：

```text
videoAd.hide();
```

### 19、销毁视频广告

调用该函数销毁视频广告

函数：

```text
videoAd.destroy();
```

### 20、监听视频广告关闭按钮点击事件

关闭视频广告时该函数执行，该函数执行并不代表视频正常观看完。奖励应在展示成功回调中设置。

函数：

```text
videoAd.onClose(func);
```

参数说明：

| **参数** | **含义** | **类型** | **是否为空** | **备注** |
| :--- | :--- | :--- | :--- | :--- |
| func | 视频广告关闭时回调该函数 | function | 非空 | 游戏定义回调函数 |

### 21、错误码列表

```text
1001 = 请求后台接口出现问题
1002 = 内部出现问题；例如，收到广告服务器的无效响应。
1003 = 广告请求无效；例如，广告单元 ID 不正确。
1004 = 由于网络连接问题，广告请求失败。
1005 = 广告请求成功，但由于缺少广告资源，未返回广告
1006 = 激励广告已展示。 RewardedAd 对象是一次性对象，且仅可展示一次。将新的 RewardedAd 实例化并进行加载，即可展示新的广告。
1007 = 广告尚未成功加载。
1008 = 应用未在前台运行时，广告无法展示。
```

